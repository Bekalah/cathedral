<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cathedral Web Engine</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <meta name="color-scheme" content="dark light">
  <style>
    :root {
      --bg:#070710;
      --panel:#111122;
      --ink:#f2f2ff;
      --muted:#9fa2c9;
      --accent:#8ad4ff;
      --accent-soft:rgba(138,212,255,0.18);
    }
    html,body { margin:0; padding:0; background:var(--bg); color:var(--ink); font:15px/1.6 "IBM Plex Sans",system-ui,sans-serif; }
    header { padding:18px 24px; border-bottom:1px solid #1c1c32; background:#05050c; }
    header h1 { margin:0; font-size:1.5rem; letter-spacing:0.08em; text-transform:uppercase; }
    header p { margin:6px 0 0; color:var(--muted); max-width:960px; }
    main { max-width:1400px; margin:0 auto 48px; padding:28px; display:grid; gap:28px; }
    .hero { display:grid; gap:24px; grid-template-columns:minmax(0,1fr) 360px; }
    canvas { width:100%; height:auto; border-radius:16px; border:1px solid rgba(255,255,255,0.06); background:#05050c; box-shadow:0 0 0 1px rgba(138,212,255,0.18); }
    .stack-card { background:var(--panel); border:1px solid #1c1c32; border-radius:18px; padding:20px; display:grid; gap:16px; }
    .stack-card h2 { margin:0; font-size:1.05rem; letter-spacing:0.06em; text-transform:uppercase; }
    .stack-card p { margin:0; color:var(--muted); font-size:0.9rem; }
    .layer-list { display:grid; gap:10px; }
    .layer-item { border-radius:12px; border:1px solid rgba(255,255,255,0.08); padding:12px; }
    .layer-item strong { display:block; letter-spacing:0.06em; text-transform:uppercase; font-size:0.85rem; }
    .layer-item span { display:block; margin-top:4px; color:var(--muted); font-size:0.8rem; }
    .grid { display:grid; gap:18px; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
    .app-card { background:var(--panel); border:1px solid #1c1c32; border-radius:16px; padding:18px; display:grid; gap:10px; text-decoration:none; color:inherit; }
    .app-card:hover { border-color:rgba(138,212,255,0.5); }
    .app-card h3 { margin:0; font-size:1rem; letter-spacing:0.05em; text-transform:uppercase; }
    .app-card p { margin:0; color:var(--muted); font-size:0.85rem; }
    .status { display:inline-block; margin-top:6px; padding:4px 10px; border-radius:999px; background:var(--accent-soft); color:var(--accent); letter-spacing:0.05em; font-size:0.7rem; text-transform:uppercase; }
    .legend { color:var(--muted); font-size:0.85rem; }
    @media (max-width:1180px) { .hero { grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <header>
    <h1>Cathedral Web Engine</h1>
    <p>Canonical runtime weaving lattice renderers, atelier couture, biometric overlays, and mode shell. Everything here is static and offline-first.</p>
  </header>
  <main>
    <section class="hero">
      <canvas id="heroCanvas" width="960" height="720" aria-label="Cathedral helix canvas"></canvas>
      <article class="stack-card">
        <h2>Engine Stack</h2>
        <p>All layers render once per interaction — no animation, no external calls. Palette + numerology constants stay aligned with ND-safe doctrine.</p>
        <div class="layer-list">
          <div class="layer-item">
            <strong>Layer 1 — Vesica Field</strong>
            <span>Intersecting circles seeded by constants (3, 9, 33).</span>
          </div>
          <div class="layer-item">
            <strong>Layer 2 — Tree-of-Life</strong>
            <span>Ten sephirot nodes, twenty-two paths.</span>
          </div>
          <div class="layer-item">
            <strong>Layer 3 — Fibonacci Spiral</strong>
            <span>Static phi curve, no motion.</span>
          </div>
          <div class="layer-item">
            <strong>Layer 4 — Double Helix</strong>
            <span>144-point lattice strands with mirrored rungs.</span>
          </div>
        </div>
        <p class="legend">Use the cards below to open specialised consoles. Each app is a plain HTML file: double-click to launch offline.</p>
      </article>
    </section>

    <section class="grid" id="appGrid"></section>
  </main>

  <script type="module">
    import { renderHelix } from "../../js/helix-renderer.mjs";

    const canvas = document.getElementById('heroCanvas');
    const ctx = canvas.getContext('2d');

    const palette = {
      bg: '#05050b',
      ink: '#f2f2ff',
      layers: ['#8ad4ff', '#a7f5ff', '#a8ffc8', '#ffd79c', '#f5b6ff', '#dcdfff']
    };

    const NUM = Object.freeze({
      THREE: 3,
      SEVEN: 7,
      NINE: 9,
      ELEVEN: 11,
      TWENTYTWO: 22,
      THIRTYTHREE: 33,
      NINETYNINE: 99,
      ONEFORTYFOUR: 144
    });

    if (ctx) {
      renderHelix(ctx, { width: canvas.width, height: canvas.height, palette, NUM });
    }

    const APPS = [
      {
        title: 'Cosmogenesis Lattice',
        description: 'Realm switching, 144-node vesica lattice with Display-P3 palette.',
        path: '../cosmogenesis-lattice/index.html',
        status: 'static canvas'
      },
      {
        title: 'Cosmogenesis Atelier',
        description: 'Haute-couture interface around the helix renderer.',
        path: '../cosmogenesis-atelier/index.html',
        status: 'lookbook'
      },
      {
        title: 'Elite Biometrics',
        description: 'Heart rate, HRV, and GSR overlays with manual mode bar.',
        path: '../elite-biometrics/index.html',
        status: 'research'
      },
      {
        title: 'Cathedral System Shell',
        description: 'Mode toggles for art, geometry, story, game, harmonic, experimental.',
        path: '../cathedral-system-shell/index.html',
        status: 'shell'
      },
      {
        title: 'Lean Helix Engine',
        description: 'Standalone sacred-geometry renderer (vesica, tree, fibonacci, helix).',
        path: '../cosmogenesis-engine/index.html',
        status: 'renderer'
      }
    ];

    const grid = document.getElementById('appGrid');
    APPS.forEach(app => {
      const link = document.createElement('a');
      link.className = 'app-card';
      link.href = app.path;
      link.textContent = '';
      const heading = document.createElement('h3');
      heading.textContent = app.title;
      const body = document.createElement('p');
      body.textContent = app.description;
      const status = document.createElement('span');
      status.className = 'status';
      status.textContent = app.status;
      link.append(heading, body, status);
      grid.append(link);
    });
  </script>
</body>
</html>
